name: Create a yak page and push to azure
on: push

env:
  YAK_PATH: './grasshoperYak'

jobs:
  upload:
    runs-on: windows-latest
    steps:
      - name: ðŸ›Ž Checkout repo
        uses: actions/checkout@v2
        with: 
          fetch-depth: 0
          
      - name: Login via Az module
        uses: azure/login@v1
        with:
          creds: ${{secrets.AZURE_CREDS}}
          enable-AzPSSession: true
          
      - name: Deploy Hub
        uses: azure/powershell@v1
        with:
          inlineScript: |
            ./yakPush.ps1 -$conString "${{secrets.AZURE_STORAGE_CONNECTION_STRING}}" -fileStored "./grasshoperYak"
          azPSVersion: "latest"
